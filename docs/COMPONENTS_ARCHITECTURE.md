# Архитектура компонентов и их взаимодействие

## Обзор

Данный документ описывает структуру компонентов библиотеки `dxd-style-code`, их зависимости и взаимодействие друг с другом.

## Иерархия компонентов

Библиотека следует принципам Atomic Design и разделяет компоненты на три основных уровня:

- **Atoms (Атомы)** - базовые, неделимые компоненты
- **Molecules (Молекулы)** - композиции атомов
- **Organisms (Организмы)** - сложные композиции молекул и атомов

---

## Организмы (Organisms) — верхний уровень

### DXAppLayout
**Назначение:** Главный layout компонент приложения

**Использует:**
- `DXBackdrop` - для затемнения фона

**Содержит (через slots):**
- `DXHeaderBar` - верхняя панель
- `DXSidebarMenu` - боковое меню
- `DXContainer` - контентная область

**Используется в:** Корневых layout страниц приложения

---

### DXHeaderBar
**Назначение:** Верхняя панель навигации

**Использует:**
- `DXContainer` - для ограничения ширины
- `DXLink` - для навигационных ссылок
- `DXButton` - для кнопок действий
- `DXIcon` - для иконок

**Может содержать:**
- `DXDropdown` - выпадающие меню
- `DXAvatar` - аватар пользователя
- `DXInput` - поле поиска

**Используется в:** `DXAppLayout`

---

### DXSidebarMenu
**Назначение:** Боковое меню навигации

**Использует:**
- `DXInput` - для поиска по меню
- `DXIcon` - для иконок пунктов меню

**Часть:** `DXAppLayout`, `DXSidebar`

**Особенности:**
- Поддерживает поиск
- Поддерживает compact режим
- Поддерживает вложенные секции

---

### DXSidebar
**Назначение:** Боковая панель

**Использует:**
- `DXBackdrop` - для затемнения на мобильных

**Содержит:**
- `DXSidebarMenu` (через slot)

**Используется в:** `DXAppLayout`

---

### DXTable
**Назначение:** Полнофункциональная таблица с сортировкой, фильтрацией и пагинацией

**Использует:**
- `DXBaseTable` - базовая таблица
- `DXTableToolbar` - панель инструментов
- `DXTablePagination` - пагинация
- `DXTableFiltersPanel` - панель фильтров

**Особенности:**
- Сортировка колонок
- Фильтрация данных
- Пагинация
- Выбор строк
- Режимы работы с данными (client/server)

---

### DXModal
**Назначение:** Модальное окно

**Использует:**
- `DXBackdrop` - затемнение фона
- `DXButton` или `DXCloseButton` - кнопка закрытия

**Варианты:**
- `default` - стандартное модальное окно
- `half-right` - боковая панель справа
- `fullscreen` - полноэкранный режим

---

### DXDropdown
**Назначение:** Выпадающее меню

**Использует:**
- `DXIcon` - иконка chevron

**Особенности:**
- Позиционирование (top, bottom, left, right)
- Клавиатурная навигация
- Варианты ширины

---

### DXTabs
**Назначение:** Вкладки

**Использует:**
- `DXButton` - для табов

**Особенности:**
- Горизонтальная/вертикальная ориентация
- Прокрутка при переполнении

---

### DXDataTable
**Назначение:** Расширенная таблица данных с фильтрами

**Использует:**
- `DXTable` - базовая таблица
- `DXInput` - поля фильтрации
- `DXSelect` - выпадающие списки фильтров
- `DXDatePicker` - выбор даты
- `DXButton` - кнопки действий

---

### DXDashboardWidget
**Назначение:** Виджет для дашборда

**Использует:**
- `DXCard` - обертка виджета
- `DXButton` - кнопки действий
- `DXIcon` - иконки
- `DXStatCard` - карточка статистики
- `DXChartContainer` - контейнер для графиков
- `DXTable` - таблица данных

**Типы виджетов:**
- `stat` - статистика
- `chart` - график
- `table` - таблица
- `text` - текст

---

### DXChartContainer
**Назначение:** Контейнер для графиков

**Использует:**
- `DXCard` - обертка
- `DXSelect` - выбор типа графика

---

### DXMediaGallery
**Назначение:** Галерея медиа-файлов

**Использует:**
- `DXGrid` - сетка для отображения
- `DXModal` - просмотр в полном размере
- `DXObserver` - lazy loading
- `DXButton` - кнопки навигации
- `DXIcon` - иконки

---

### DXFormWizard
**Назначение:** Мастер форм (многошаговая форма)

**Использует:**
- `DXProgress` - индикатор прогресса
- `DXButton` - кнопки навигации
- `DXIcon` - иконки

**Содержит:**
- `DXFormControl` - контролы форм
- `DXInput` - поля ввода
- `DXSelect` - выпадающие списки
- `DXTextarea` - многострочные поля

---

## Молекулы (Molecules) — средний уровень

### Компоненты форм

#### DXInput
**Использует:**
- `DXFormLabel` - лейбл поля
- `DXIconWrapper` - обертка для иконок (prefix/suffix)

**Особенности:**
- Поддержка иконок слева и справа
- Интеграция с `DXInputGroup`

---

#### DXSelect
**Использует:**
- `DXFormLabel` - лейбл поля
- `DXIconWrapper` - обертка для иконки chevron

---

#### DXTextarea
**Использует:**
- `DXFormLabel` - лейбл поля
- `DXIconWrapper` - обертка для иконок (опционально)

---

#### DXPasswordInput
**Использует:**
- `DXFormLabel` - лейбл поля

**Особенности:**
- Переключение видимости пароля

---

#### DXDatePicker
**Использует:**
- `DXInput` - базовое поле ввода

---

#### DXTimePicker
**Использует:**
- `DXInput` - базовое поле ввода

---

#### DXFormControl
**Назначение:** Обертка для контролов форм

**Использует:**
- `DXIcon` - иконки prefix
- `DXValidationIcon` - иконка валидации

**Особенности:**
- Отображение ошибок
- Подсчет символов
- Валидация

---

#### DXInputGroup
**Назначение:** Группа связанных input элементов

**Содержит:**
- `DXInput` - основное поле
- `DXInputAddon` - аддоны (префиксы/суффиксы)
- `DXSelect` - выпадающие списки
- `DXTextarea` - многострочные поля

**Особенности:**
- Регистрация компонентов через provide/inject
- Автоматическое позиционирование аддонов

---

### Компоненты таблиц

#### DXBaseTable
**Назначение:** Базовая таблица без дополнительных функций

**Используется в:** `DXTable`

---

#### DXTableToolbar
**Назначение:** Панель инструментов таблицы

**Используется в:** `DXTable`

---

#### DXTablePagination
**Назначение:** Пагинация таблицы

**Используется в:** `DXTable`

---

#### DXTableFiltersPanel
**Назначение:** Панель фильтров таблицы

**Используется в:** `DXTable`

---

### Другие молекулы

#### DXStatCard
**Назначение:** Карточка статистики

**Использует:**
- `DXCard` - базовая карточка
- `DXIcon` - иконка метрики

**Используется в:** `DXDashboardWidget`

---

#### DXSearchBar
**Назначение:** Поисковая строка

**Использует:**
- `DXInput` - поле поиска
- `DXIcon` - иконка поиска
- `DXLoader` - индикатор загрузки

---

#### DXDataFilter
**Назначение:** Панель фильтрации данных

**Использует:**
- `DXInput` - поля фильтрации
- `DXSelect` - выпадающие списки
- `DXDatePicker` - выбор даты
- `DXButton` - кнопки действий
- `DXIcon` - иконки

---

#### DXList
**Назначение:** Список элементов

**Используется в:** Различных компонентах для отображения списков

---

## Атомы (Atoms) — базовый уровень

### Базовые компоненты

#### DXButton
**Использует:**
- `DXIcon` (опционально) - иконка в кнопке

**Используется в:** Практически во всех компонентах

---

#### DXLink
**Использует:**
- `DXIcon` (опционально) - иконка в ссылке

**Используется в:** `DXHeaderBar`, навигационных компонентах

---

#### DXIcon
**Назначение:** Базовый компонент иконки

**Используется в:** Большинстве компонентов

---

#### DXIconWrapper
**Назначение:** Обертка для позиционирования иконок

**Используется в:** `DXInput`, `DXSelect`, `DXTextarea`

---

#### DXAvatar
**Использует:**
- `DXIcon` - fallback иконка при отсутствии изображения

**Используется в:** `DXHeaderBar`, профилях пользователей

---

#### DXCard
**Назначение:** Базовая карточка

**Используется в:** `DXStatCard`, `DXDashboardWidget`, `DXChartContainer`

---

#### DXBadge
**Назначение:** Бейдж/метка

**Используется в:** Различных компонентах для маркировки

---

#### DXFormLabel
**Назначение:** Лейбл для полей форм

**Используется в:** `DXInput`, `DXSelect`, `DXTextarea`

**Особенности:**
- Отображение ошибок
- Обязательные поля
- Helper текст

---

#### DXInputAddon
**Назначение:** Аддон для input групп

**Используется в:** `DXInputGroup`

---

#### DXBackdrop
**Назначение:** Затемнение фона

**Используется в:** `DXModal`, `DXSidebar`, `DXAppLayout`

---

#### DXTooltip
**Назначение:** Всплывающая подсказка

**Используется в:** Различных компонентах для дополнительной информации

---

#### DXToast
**Назначение:** Уведомление

**Используется в:** Глобальных уведомлениях приложения

---

#### DXLoader
**Назначение:** Индикатор загрузки

**Используется в:** `DXSearchBar`, компонентах с асинхронной загрузкой

---

#### DXProgress
**Назначение:** Индикатор прогресса

**Используется в:** `DXFormWizard`, процессах загрузки

---

#### DXValidationIcon
**Назначение:** Иконка валидации (success/error)

**Используется в:** `DXFormControl`

---

## Layout компоненты

### DXContainer
**Назначение:** Контейнер с ограниченной шириной

**Используется в:** `DXHeaderBar`, `DXAppLayout`

**Особенности:**
- Адаптивная максимальная ширина
- Горизонтальные отступы
- Автоматическое центрирование

---

### DXBox
**Назначение:** Универсальный контейнер для стилизации

**Особенности:**
- Padding/Margin
- Фон
- Скругление

---

### DXFlex
**Назначение:** Flexbox контейнер

**Особенности:**
- Направление (row/column)
- Выравнивание
- Gap между элементами

---

### DXGrid
**Назначение:** Сетка для размещения элементов

**Используется в:** `DXMediaGallery`

**Особенности:**
- Адаптивные колонки
- Gap между элементами

---

### DXStack
**Назначение:** Вертикальный стек элементов

**Особенности:**
- Spacing между элементами
- Выравнивание

---

### DXSpacer
**Назначение:** Гибкий отступ

**Особенности:**
- Вертикальный/горизонтальный
- Автоматическое заполнение пространства

---

## Utilities

### DXPortal
**Назначение:** Портал для рендеринга вне DOM дерева

**Используется в:** `DXModal`, `DXTooltip`

---

### DXObserver
**Назначение:** Intersection Observer для lazy loading

**Используется в:** `DXMediaGallery`

---

### DXBreakpointProvider
**Назначение:** Провайдер для доступа к брейкпоинтам

**Используется в:** Адаптивных компонентах

---

### DXThemeProvider
**Назначение:** Провайдер темы

**Используется в:** Корне приложения

---

### DXAnimatePresence
**Назначение:** Анимации появления/исчезновения

**Используется в:** Динамических списках

---

### DXTransitionGroup
**Назначение:** Групповые переходы

**Используется в:** Анимированных списках

---

## Визуальная схема иерархии

```
DXAppLayout
├── DXHeaderBar
│   ├── DXContainer
│   ├── DXLink
│   ├── DXButton
│   ├── DXIcon
│   └── DXDropdown (опционально)
│       └── DXIcon
├── DXSidebar
│   ├── DXBackdrop
│   └── DXSidebarMenu
│       ├── DXInput
│       │   ├── DXFormLabel
│       │   └── DXIconWrapper
│       └── DXIcon
└── DXContainer (content area)

DXTable
├── DXTableToolbar
├── DXBaseTable
├── DXTablePagination
└── DXTableFiltersPanel

DXModal
├── DXBackdrop
└── DXButton (close)

DXFormWizard
├── DXProgress
├── DXButton
├── DXIcon
└── Form Components
    ├── DXFormControl
    │   ├── DXIcon
    │   └── DXValidationIcon
    ├── DXInput
    │   ├── DXFormLabel
    │   └── DXIconWrapper
    ├── DXSelect
    │   ├── DXFormLabel
    │   └── DXIconWrapper
    └── DXTextarea
        ├── DXFormLabel
        └── DXIconWrapper

DXDashboardWidget
├── DXCard
├── DXButton
├── DXIcon
├── DXStatCard
│   ├── DXCard
│   └── DXIcon
├── DXChartContainer
│   ├── DXCard
│   └── DXSelect
└── DXTable
    └── (см. выше)
```

---

## Ключевые паттерны взаимодействия

### 1. Композиция форм
Паттерн: `DXFormLabel` + `DXIconWrapper` используются в `DXInput`, `DXSelect`, `DXTextarea`

```
DXInput/DXSelect/DXTextarea
├── DXFormLabel (label, error, helper)
└── DXIconWrapper (prefix/suffix icons)
```

### 2. Композиция таблиц
Паттерн: `DXTable` собирается из нескольких специализированных компонентов

```
DXTable
├── DXTableToolbar (поиск, фильтры, действия)
├── DXBaseTable (основная таблица)
├── DXTablePagination (пагинация)
└── DXTableFiltersPanel (расширенные фильтры)
```

### 3. Layout композиция
Паттерн: `DXAppLayout` объединяет основные layout компоненты

```
DXAppLayout
├── DXHeaderBar (верхняя панель)
├── DXSidebar (боковая панель)
└── DXContainer (контент)
```

### 4. Виджеты дашборда
Паттерн: `DXDashboardWidget` использует различные типы контента

```
DXDashboardWidget
├── DXCard (обертка)
├── DXButton (действия)
└── Контент (DXStatCard | DXChartContainer | DXTable)
```

### 5. Универсальное использование иконок
Паттерн: `DXIcon` используется практически во всех компонентах

- `DXButton` - иконка в кнопке
- `DXLink` - иконка в ссылке
- `DXInput` - prefix/suffix иконки
- `DXAvatar` - fallback иконка
- `DXStatCard` - иконка метрики
- И многие другие...

---

## Зависимости между уровнями

### Atoms → используются везде
- `DXIcon` - самый используемый компонент
- `DXButton` - используется в большинстве компонентов
- `DXCard` - базовая обертка для контента

### Molecules → композиции Atoms
- Все формы используют `DXFormLabel` и `DXIconWrapper`
- Таблицы собираются из специализированных компонентов
- Виджеты используют `DXCard` и `DXIcon`

### Organisms → композиции Molecules и Atoms
- `DXAppLayout` - главная композиция
- `DXTable` - композиция табличных компонентов
- `DXDashboardWidget` - композиция виджетов

---

## Рекомендации по использованию

1. **Начинайте с Atoms** - используйте базовые компоненты для простых задач
2. **Используйте Molecules** - для стандартных паттернов (формы, списки)
3. **Применяйте Organisms** - для сложных композиций (layout, таблицы, виджеты)
4. **Следуйте паттернам** - используйте установленные паттерны композиции
5. **Переиспользуйте** - не создавайте новые компоненты, если можно использовать существующие

---

## Обновления схемы

Данная схема должна обновляться при добавлении новых компонентов или изменении зависимостей существующих.

**Дата последнего обновления:** 2024




