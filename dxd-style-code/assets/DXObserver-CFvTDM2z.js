import{r as d,c as h,A as g,d as y,w as m,a as x,m as _,l as E,o as O}from"./vue.esm-bundler-CzLKT_w4.js";import{u as D}from"./useClassComposition-Dym2pzZ_.js";const M=["data-threshold","data-once"],S={__name:"DXObserver",props:{threshold:{type:[Number,Array],default:.1,validator:t=>Array.isArray(t)?t.every(r=>r>=0&&r<=1):t>=0&&t<=1},rootMargin:{type:String,default:"0px"},once:{type:Boolean,default:!1},root:{type:[String,Object],default:null},disabled:{type:Boolean,default:!1}},emits:["intersect"],setup(t,{emit:r}){const e=t,v=r,l=d(null),a=d(null),c=d(!1),b=h(()=>D("w-full"));function i(){if(e.disabled||!l.value||e.once&&c.value)return null;const o={threshold:e.threshold,rootMargin:e.rootMargin};if(e.root)if(typeof e.root=="string"){const n=document.querySelector(e.root);n?o.root=n:console.warn(`DXObserver: Root элемент "${e.root}" не найден`)}else e.root instanceof HTMLElement&&(o.root=e.root);const u=new IntersectionObserver(n=>{n.forEach(f=>{const p=f.isIntersecting;v("intersect",p,f),e.once&&p&&(c.value=!0,s())})},o);return u.observe(l.value),u}function s(){a.value&&(a.value.disconnect(),a.value=null)}return g(()=>{e.disabled||(a.value=i())}),y(()=>{s()}),m(()=>e.disabled,o=>{o?s():a.value=i()}),m([()=>e.threshold,()=>e.rootMargin,()=>e.root],()=>{e.disabled||(s(),a.value=i())}),(o,u)=>(O(),x("div",{ref_key:"rootElement",ref:l,class:E(b.value),"data-component":"DXObserver","data-threshold":t.threshold,"data-once":t.once},[_(o.$slots,"default")],10,M))}};S.__docgenInfo={exportName:"default",displayName:"DXObserver",description:"",tags:{},props:[{name:"threshold",description:`Порог видимости (0.0 - 1.0)
Определяет, какая часть элемента должна быть видна для срабатывания`,tags:{default:[{description:"0.1",title:"default"}]},type:{name:"number|array"},defaultValue:{func:!1,value:"0.1"}},{name:"rootMargin",description:`Отступы от root элемента (аналогично CSS margin)
Формат: "10px 20px 30px 40px" или "10px"`,tags:{default:[{description:'"0px"',title:"default"}]},type:{name:"string"},defaultValue:{func:!1,value:'"0px"'}},{name:"once",description:`Срабатывать только один раз
После первого срабатывания observer отключается`,tags:{default:[{description:"false",title:"default"}]},type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"root",description:`Root элемент для наблюдения (по умолчанию viewport)
Может быть селектором или HTMLElement`,tags:{default:[{description:"null",title:"default"}]},type:{name:"string|object"},defaultValue:{func:!1,value:"null"}},{name:"disabled",description:"Отключить observer",tags:{default:[{description:"false",title:"default"}]},type:{name:"boolean"},defaultValue:{func:!1,value:"false"}}],events:[{name:"intersect"}],slots:[{name:"default"}],sourceFiles:["/Users/lea_alex/Projects/1_DEVELOP/0_DESIGN_X_DEV/dxd-style-code/src/components/utilities/DXObserver/DXObserver.vue"]};export{S as _};
