import{r as f,c as V,w as I,s as X,h as F,a as r,o,p as c,b as v,z as m,H as j,I as O,A as p,q as y,B as x,F as U,G as z,d as K,y as $,f as A}from"./vue.esm-bundler-C1fUoNF-.js";const G={key:0,class:"block text-sm font-medium text-slate-700 mb-1"},H={class:"relative"},P=["placeholder","disabled","onKeydown"],R={key:1,class:"absolute z-20 mt-2 w-full bg-white border border-slate-200 rounded-xl shadow-lg py-2 max-h-48 overflow-y-auto"},T=["onClick","onMouseenter"],q={class:"flex items-center gap-2"},J={key:0,class:"w-4 h-4 text-slate-900",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Q={key:0,class:"px-4 py-2 text-sm text-slate-500"},W={key:0},Y={key:1},Z={key:2,class:"mt-1 text-xs text-slate-500"},ee={__name:"DXComboBox",props:{modelValue:[String,Number],options:{type:Array,default:()=>[]},label:{type:String,default:""},placeholder:{type:String,default:""},helper:{type:String,default:""},disabled:{type:Boolean,default:!1},filterable:{type:Boolean,default:!0},allowCustom:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(n,{emit:B}){const l=n,b=B,h=f(null),D=f(null),a=f(""),s=f(!1),i=f(0),g=V(()=>l.options.find(e=>e.value===l.modelValue)),d=V(()=>{if(!l.filterable||!a.value)return l.options;const e=a.value.toLowerCase();return l.options.filter(t=>t.label.toLowerCase().includes(e))}),_=()=>{if(s.value=!0,i.value=0,!l.filterable)return;!l.options.find(t=>t.label===a.value)&&!l.allowCustom&&b("update:modelValue",null)},M=()=>{s.value=!0,i.value=0},w=e=>{a.value=e.label,b("update:modelValue",e.value),s.value=!1},E=()=>{if(!s.value){s.value=!0;return}i.value<d.value.length-1&&i.value++},L=()=>{i.value>0&&i.value--},N=()=>{if(s.value&&d.value.length>0){const e=d.value[i.value];e&&w(e)}else l.allowCustom&&a.value&&(b("update:modelValue",a.value),s.value=!1)},k=e=>{h.value&&!h.value.contains(e.target)&&(s.value=!1,!l.allowCustom&&g.value&&(a.value=g.value.label))};return I(()=>l.modelValue,e=>{const t=l.options.find(u=>u.value===e);a.value=t?t.label:l.allowCustom?String(e||""):""},{immediate:!0}),X(()=>document.addEventListener("click",k)),F(()=>document.removeEventListener("click",k)),(e,t)=>(o(),r("div",{class:"relative",ref_key:"root",ref:h,"data-component":"DXComboBox"},[n.label?(o(),r("label",G,m(n.label),1)):c("",!0),v("div",H,[j(v("input",{ref_key:"inputRef",ref:D,"onUpdate:modelValue":t[0]||(t[0]=u=>a.value=u),type:"text",placeholder:n.placeholder,disabled:n.disabled,class:y(["w-full pr-10 rounded-xl border border-slate-200 bg-white px-4 py-3 text-sm text-slate-900 placeholder:text-slate-400 hover:border-slate-300 focus:border-slate-300 focus:outline-none transition-colors",n.disabled&&"opacity-60 cursor-not-allowed bg-slate-50"]),onInput:_,onFocus:M,onKeydown:[p(x(E,["prevent"]),["down"]),p(x(L,["prevent"]),["up"]),p(x(N,["prevent"]),["enter"]),t[1]||(t[1]=p(u=>s.value=!1,["escape"]))]},null,42,P),[[O,a.value]]),(o(),r("svg",{class:y(["absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none transition-transform",{"rotate-180":s.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...t[2]||(t[2]=[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2))]),s.value&&(d.value.length>0||n.allowCustom&&a.value)?(o(),r("div",R,[(o(!0),r(U,null,z(d.value,(u,C)=>(o(),r("button",{key:u.value,type:"button",class:y(["w-full text-left px-4 py-2 text-sm hover:bg-slate-50 flex items-center justify-between",{"bg-slate-100":C===i.value}]),onClick:S=>w(u),onMouseenter:S=>i.value=C},[v("span",q,[u.icon?(o(),K(A(u.icon),{key:0,class:"w-4 h-4 text-slate-500"})):c("",!0),$(" "+m(u.label),1)]),n.modelValue===u.value?(o(),r("svg",J,[...t[3]||(t[3]=[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):c("",!0)],42,T))),128)),d.value.length===0&&a.value?(o(),r("div",Q,[n.allowCustom?(o(),r("span",W,'Нажмите Enter для "'+m(a.value)+'"',1)):(o(),r("span",Y,"Не найдено"))])):c("",!0)])):c("",!0),n.helper?(o(),r("p",Z,m(n.helper),1)):c("",!0)],512))}};ee.__docgenInfo={exportName:"default",displayName:"DXComboBox",description:"",tags:{},props:[{name:"modelValue",type:{name:"string|number"}},{name:"options",type:{name:"array"},defaultValue:{func:!1,value:"[]"}},{name:"label",type:{name:"string"},defaultValue:{func:!1,value:'""'}},{name:"placeholder",type:{name:"string"},defaultValue:{func:!1,value:'""'}},{name:"helper",type:{name:"string"},defaultValue:{func:!1,value:'""'}},{name:"disabled",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"filterable",type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"allowCustom",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}}],events:[{name:"update:modelValue"}],sourceFiles:["/Users/lea_alex/Projects/1_DEVELOP/0_DESIGN_X_DEV/dxd-style-code/src/components/molecules/DXComboBox/DXComboBox.vue"]};export{ee as _};
