import{r as g,c as n,w as x,a as s,o as t,d as B,e as R,F as V,g as h,D as c,q as u,b as p,j,x as E,p as U}from"./vue.esm-bundler-C1fUoNF-.js";import{u as q}from"./useSize-DIMNv1Ms.js";import{u as y}from"./useClassComposition-Dym2pzZ_.js";import{_ as O}from"./DXObserver-BdOJti0k.js";import{_ as $}from"./DXIcon-Bc0cQL8C.js";import{r as C}from"./PhotoIcon-Bus_5N6F.js";const M=["data-size","data-object-fit","data-rounded"],P=["src","alt","srcset","sizes"],A={key:2,class:"w-full h-full"},G=["src","alt"],H=["src","alt","srcset","sizes"],J={key:2,class:"w-full h-full"},K=["src","alt"],Q={__name:"DXImage",props:{src:{type:String,required:!0},alt:{type:String,default:""},width:{type:[String,Number],default:null},height:{type:[String,Number],default:null},size:{type:String,default:null},objectFit:{type:String,default:"cover",validator:l=>["cover","contain","fill","none","scale-down"].includes(l)},lazy:{type:Boolean,default:!1},fallback:{type:String,default:null},placeholder:{type:String,default:null},showSkeleton:{type:Boolean,default:!0},rounded:{type:String,default:"none",validator:l=>["none","sm","md","lg","xl","full"].includes(l)},srcset:{type:String,default:null},sizes:{type:String,default:null}},emits:["load","error"],setup(l,{emit:D}){const e=l,b=D,d=g(!1),i=g(!1),o=g(!1),f=n(()=>e.placeholder&&e.lazy&&!o.value?e.placeholder:e.src),F=n(()=>{const a={};return e.width&&(a.width=typeof e.width=="number"?`${e.width}px`:e.width),e.height&&(a.height=typeof e.height=="number"?`${e.height}px`:e.height),Object.keys(a).length>0?a:null}),m=n(()=>null),I=n(()=>y("relative inline-block overflow-hidden",e.size?q(e.size,"image"):null,{"rounded-sm":e.rounded==="sm","rounded-md":e.rounded==="md","rounded-lg":e.rounded==="lg","rounded-xl":e.rounded==="xl","rounded-full":e.rounded==="full"})),v=n(()=>{const a={cover:"object-cover",contain:"object-contain",fill:"object-fill",none:"object-none","scale-down":"object-scale-down"};return y("w-full h-full",a[e.objectFit]||a.cover)}),L=n(()=>y("w-full h-full")),k=n(()=>y("w-full h-full bg-slate-100 flex items-center justify-center")),z=n(()=>e.size&&{xs:"sm",sm:"md",md:"lg",lg:"xl",xl:"xl"}[e.size]||"lg");function w(){b("load")}function S(){d.value=!0,b("error")}function N(a){a&&(o.value=!0)}return e.lazy||(o.value=!0),x(()=>e.src,()=>{d.value=!1,i.value=!1,e.lazy||(o.value=!0)}),x(()=>e.lazy,a=>{a||(o.value=!0)}),(a,r)=>(t(),s("div",{class:u(I.value),"data-component":"DXImage","data-size":l.size,"data-object-fit":l.objectFit,"data-rounded":l.rounded,style:c(F.value)},[l.lazy?(t(),B(O,{key:0,threshold:.1,once:!0,onIntersect:N},{default:R(()=>[o.value?(t(),s(V,{key:0},[f.value&&!d.value?(t(),s("img",{key:0,src:f.value,alt:l.alt,srcset:l.srcset,sizes:l.sizes,class:u(v.value),style:c(m.value),onLoad:w,onError:S},null,46,P)):a.$slots.fallback?h(a.$slots,"fallback",{key:1}):l.fallback&&!i.value?(t(),s("div",A,[p("img",{src:l.fallback,alt:l.alt,class:u(v.value),style:c(m.value),onError:r[0]||(r[0]=X=>i.value=!0)},null,46,G)])):(t(),s("div",{key:3,class:u(k.value)},[j($,{icon:E(C),size:z.value,class:"text-slate-400"},null,8,["icon","size"])],2))],64)):l.showSkeleton?(t(),s("div",{key:1,class:u(L.value)},[h(a.$slots,"placeholder",{},()=>[r[2]||(r[2]=p("div",{class:"w-full h-full bg-slate-200 animate-pulse"},null,-1))])],2)):U("",!0)]),_:3})):(t(),s(V,{key:1},[f.value&&!d.value?(t(),s("img",{key:0,src:f.value,alt:l.alt,srcset:l.srcset,sizes:l.sizes,class:u(v.value),style:c(m.value),onLoad:w,onError:S},null,46,H)):a.$slots.fallback?h(a.$slots,"fallback",{key:1}):l.fallback&&!i.value?(t(),s("div",J,[p("img",{src:l.fallback,alt:l.alt,class:u(v.value),style:c(m.value),onError:r[1]||(r[1]=X=>i.value=!0)},null,46,K)])):(t(),s("div",{key:3,class:u(k.value)},[j($,{icon:E(C),size:z.value,class:"text-slate-400"},null,8,["icon","size"])],2))],64))],14,M))}};Q.__docgenInfo={exportName:"default",displayName:"DXImage",description:"",tags:{},props:[{name:"src",description:"URL изображения",type:{name:"string"},required:!0},{name:"alt",description:"Alt текст для доступности",type:{name:"string"},defaultValue:{func:!1,value:'""'}},{name:"width",description:"Ширина изображения (кастомная)",type:{name:"string|number"},defaultValue:{func:!1,value:"null"}},{name:"height",description:"Высота изображения (кастомная)",type:{name:"string|number"},defaultValue:{func:!1,value:"null"}},{name:"size",description:"Предопределенный размер: xs | sm | md | lg | xl",type:{name:"string"},defaultValue:{func:!1,value:"null"}},{name:"objectFit",description:"object-fit: cover | contain | fill | none | scale-down",type:{name:"string"},defaultValue:{func:!1,value:'"cover"'},values:["cover","contain","fill","none","scale-down"]},{name:"lazy",description:"Lazy loading через DXObserver",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"fallback",description:"URL fallback изображения при ошибке",type:{name:"string"},defaultValue:{func:!1,value:"null"}},{name:"placeholder",description:"URL placeholder изображения",type:{name:"string"},defaultValue:{func:!1,value:"null"}},{name:"showSkeleton",description:"Показывать skeleton при загрузке",type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"rounded",description:"Скругление: none | sm | md | lg | xl | full",type:{name:"string"},defaultValue:{func:!1,value:'"none"'},values:["none","sm","md","lg","xl","full"]},{name:"srcset",description:"Responsive изображения (srcset атрибут)",type:{name:"string"},defaultValue:{func:!1,value:"null"}},{name:"sizes",description:"Sizes атрибут для responsive",type:{name:"string"},defaultValue:{func:!1,value:"null"}}],events:[{name:"load"},{name:"error"}],slots:[{name:"fallback"},{name:"placeholder"}],sourceFiles:["/Users/lea_alex/Projects/1_DEVELOP/0_DESIGN_X_DEV/dxd-style-code/src/components/atoms/DXImage/DXImage.vue"]};export{Q as _};
