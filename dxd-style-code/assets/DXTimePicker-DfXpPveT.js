import{r as H,c,w as j,a as s,o as u,b as S,j as G,H as J,p as w,x as K,F as b,G as V,q as p,z as x}from"./vue.esm-bundler-C1fUoNF-.js";import{_ as Q}from"./DXInput-BG2R0LGs.js";import{r as R}from"./ClockIcon-Dxvdr19S.js";const W=["data-format","data-size"],Y={class:"relative"},Z={key:0,class:"absolute z-50 mt-1 w-full bg-white border border-slate-200 rounded-xl shadow-lg max-h-64 overflow-y-auto"},ee={class:"p-2"},te={key:0,class:"grid grid-cols-12 gap-1 mb-2"},ne=["onClick"],ae={key:1,class:"grid grid-cols-6 gap-1 mb-2"},le=["onClick"],oe={class:"grid grid-cols-6 gap-1 mb-2"},re=["onClick"],se={key:2,class:"grid grid-cols-6 gap-1"},ue=["onClick"],ie={key:3,class:"flex gap-2 mt-2 pt-2 border-t border-slate-200"},de={__name:"DXTimePicker",props:{modelValue:{type:String,default:null},format:{type:String,default:"24h",validator:o=>["12h","24h"].includes(o)},showSeconds:{type:Boolean,default:!1},placeholder:{type:String,default:""},label:{type:String,default:""},helper:{type:String,default:""},error:{type:String,default:""},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},size:{type:String,default:"md"},minTime:{type:String,default:null},maxTime:{type:String,default:null},showDropdown:{type:Boolean,default:!0}},emits:["update:modelValue","change","blur","focus"],setup(o,{emit:C}){const a=o,i=C,h=H(!1),g=H(""),P=c(()=>Array.from({length:12},(e,t)=>({value:t+1,label:String(t+1)}))),T=c(()=>Array.from({length:24},(e,t)=>t)),z=c(()=>Array.from({length:12},(e,t)=>t*5)),A=c(()=>Array.from({length:12},(e,t)=>t*5)),k=c(()=>{if(!a.modelValue)return null;const e=d(a.modelValue);return e?a.format==="12h"?e.hour===0?12:e.hour>12?e.hour-12:e.hour:e.hour:null}),E=c(()=>{if(!a.modelValue)return null;const e=d(a.modelValue);return e?e.minute:null}),B=c(()=>{if(!a.modelValue)return null;const e=d(a.modelValue);return e?e.second||0:null}),y=c(()=>{if(!a.modelValue||a.format!=="12h")return!0;const e=d(a.modelValue);return e?e.hour<12:!0}),$=c(()=>{if(!a.modelValue)return g.value||"";const e=d(a.modelValue);if(!e)return a.modelValue;if(a.format==="12h"){let t=e.hour;const n=t>=12?"PM":"AM";return t===0?t=12:t>12&&(t-=12),a.showSeconds?`${String(t).padStart(2,"0")}:${String(e.minute).padStart(2,"0")}:${String(e.second||0).padStart(2,"0")} ${n}`:`${String(t).padStart(2,"0")}:${String(e.minute).padStart(2,"0")} ${n}`}return a.showSeconds?`${String(e.hour).padStart(2,"0")}:${String(e.minute).padStart(2,"0")}:${String(e.second||0).padStart(2,"0")}`:`${String(e.hour).padStart(2,"0")}:${String(e.minute).padStart(2,"0")}`});function d(e){var n;if(!e)return null;if(a.format==="12h"){const l=e.match(/(\d{1,2}):(\d{2})(?::(\d{2}))?\s*(AM|PM)?/i);if(l){let r=parseInt(l[1],10);const v=parseInt(l[2],10),U=l[3]?parseInt(l[3],10):0,D=(n=l[4])==null?void 0:n.toUpperCase();return D==="PM"&&r!==12&&(r+=12),D==="AM"&&r===12&&(r=0),{hour:r,minute:v,second:U}}}const t=e.match(/(\d{1,2}):(\d{2})(?::(\d{2}))?/);if(t){const l=parseInt(t[1],10),r=parseInt(t[2],10),v=t[3]?parseInt(t[3],10):0;if(l>=0&&l<=23&&r>=0&&r<=59&&v>=0&&v<=59)return{hour:l,minute:r,second:v}}return null}function m(e){if(!e)return"";if(a.format==="12h"){let t=e.hour;const n=t>=12?"PM":"AM";return t===0?t=12:t>12&&(t-=12),a.showSeconds?`${String(t).padStart(2,"0")}:${String(e.minute).padStart(2,"0")}:${String(e.second||0).padStart(2,"0")} ${n}`:`${String(t).padStart(2,"0")}:${String(e.minute).padStart(2,"0")} ${n}`}return a.showSeconds?`${String(e.hour).padStart(2,"0")}:${String(e.minute).padStart(2,"0")}:${String(e.second||0).padStart(2,"0")}`:`${String(e.hour).padStart(2,"0")}:${String(e.minute).padStart(2,"0")}`}function f(e){if(!e)return!1;if(a.minTime){const t=d(a.minTime);if(t){const n=e.hour*60+e.minute+(e.second||0)/60,l=t.hour*60+t.minute+(t.second||0)/60;if(n<l)return!1}}if(a.maxTime){const t=d(a.maxTime);if(t){const n=e.hour*60+e.minute+(e.second||0)/60,l=t.hour*60+t.minute+(t.second||0)/60;if(n>l)return!1}}return!0}function I(e){g.value=e;const t=d(e);if(t&&f(t)){const n=m(t);i("update:modelValue",n),i("change",n)}}function M(e){const t=a.modelValue?d(a.modelValue):{minute:0,second:0};let n=e;a.format==="12h"&&(e===12?n=y.value?0:12:n=y.value?e:e+12);const l={hour:n,minute:(t==null?void 0:t.minute)||0,second:(t==null?void 0:t.second)||0};if(f(l)){const r=m(l);i("update:modelValue",r),i("change",r)}}function q(e){const t=a.modelValue?d(a.modelValue):{hour:0,second:0},n={hour:(t==null?void 0:t.hour)||0,minute:e,second:(t==null?void 0:t.second)||0};if(f(n)){const l=m(n);i("update:modelValue",l),i("change",l)}}function N(e){const t=a.modelValue?d(a.modelValue):{hour:0,minute:0},n={hour:(t==null?void 0:t.hour)||0,minute:(t==null?void 0:t.minute)||0,second:e};if(f(n)){const l=m(n);i("update:modelValue",l),i("change",l)}}function _(e){if(a.format!=="12h")return;const t=a.modelValue?d(a.modelValue):{hour:0,minute:0,second:0};if(!t)return;let n=t.hour;e&&n>=12?(n-=12,n===0&&(n=12)):!e&&n<12&&(n===0&&(n=12),n+=12);const l={...t,hour:n};if(f(l)){const r=m(l);i("update:modelValue",r),i("change",r)}}function X(e){a.showDropdown&&(h.value=!0),i("focus",e)}function F(e){if(h.value=!1,g.value){const t=d(g.value);if(t&&f(t)){const n=m(t);i("update:modelValue",n)}else g.value=$.value}i("blur",e)}function O(){h.value=!1}const L={mounted(e,t){e.clickOutsideEvent=n=>{e===n.target||e.contains(n.target)||t.value()},document.addEventListener("click",e.clickOutsideEvent)},unmounted(e){document.removeEventListener("click",e.clickOutsideEvent)}};return j(()=>a.showDropdown,e=>{e||(h.value=!1)}),(e,t)=>(u(),s("div",{class:"w-full","data-component":"DXTimePicker","data-format":o.format,"data-size":o.size},[S("div",Y,[G(Q,{"model-value":$.value,placeholder:o.placeholder,disabled:o.disabled,size:o.size,error:o.error,helper:o.helper,label:o.label,required:o.required,type:"text","suffix-icon":K(R),"onUpdate:modelValue":I,onBlur:F,onFocus:X},null,8,["model-value","placeholder","disabled","size","error","helper","label","required","suffix-icon"]),h.value&&!o.disabled?J((u(),s("div",Z,[S("div",ee,[o.format==="12h"?(u(),s("div",te,[(u(!0),s(b,null,V(P.value,n=>(u(),s("button",{key:n.value,type:"button",class:p(["px-3 py-2 text-sm rounded-lg transition-colors",k.value===n.value?"bg-slate-900 text-white":"hover:bg-slate-100 text-slate-700"]),onClick:l=>M(n.value)},x(n.label),11,ne))),128))])):(u(),s("div",ae,[(u(!0),s(b,null,V(T.value,n=>(u(),s("button",{key:n,type:"button",class:p(["px-3 py-2 text-sm rounded-lg transition-colors",k.value===n?"bg-slate-900 text-white":"hover:bg-slate-100 text-slate-700"]),onClick:l=>M(n)},x(String(n).padStart(2,"0")),11,le))),128))])),S("div",oe,[(u(!0),s(b,null,V(z.value,n=>(u(),s("button",{key:n,type:"button",class:p(["px-3 py-2 text-sm rounded-lg transition-colors",E.value===n?"bg-slate-900 text-white":"hover:bg-slate-100 text-slate-700"]),onClick:l=>q(n)},x(String(n).padStart(2,"0")),11,re))),128))]),o.showSeconds?(u(),s("div",se,[(u(!0),s(b,null,V(A.value,n=>(u(),s("button",{key:n,type:"button",class:p(["px-3 py-2 text-sm rounded-lg transition-colors",B.value===n?"bg-slate-900 text-white":"hover:bg-slate-100 text-slate-700"]),onClick:l=>N(n)},x(String(n).padStart(2,"0")),11,ue))),128))])):w("",!0),o.format==="12h"?(u(),s("div",ie,[S("button",{type:"button",class:p(["flex-1 px-3 py-2 text-sm rounded-lg transition-colors",y.value?"bg-slate-900 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"]),onClick:t[0]||(t[0]=n=>_(!0))}," AM ",2),S("button",{type:"button",class:p(["flex-1 px-3 py-2 text-sm rounded-lg transition-colors",y.value?"bg-slate-100 text-slate-700 hover:bg-slate-200":"bg-slate-900 text-white"]),onClick:t[1]||(t[1]=n=>_(!1))}," PM ",2)])):w("",!0)])])),[[L,O]]):w("",!0)])],8,W))}};de.__docgenInfo={exportName:"default",displayName:"DXTimePicker",description:"",tags:{},props:[{name:"modelValue",description:"Значение времени (v-model) в формате HH:mm или HH:mm:ss",type:{name:"string"},defaultValue:{func:!1,value:"null"}},{name:"format",description:"Формат времени: 12h | 24h",type:{name:"string"},defaultValue:{func:!1,value:'"24h"'},values:["12h","24h"]},{name:"showSeconds",description:"Показывать секунды",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"placeholder",description:"Placeholder",type:{name:"string"},defaultValue:{func:!1,value:'""'}},{name:"label",description:"Лейбл",type:{name:"string"},defaultValue:{func:!1,value:'""'}},{name:"helper",description:"Вспомогательный текст",type:{name:"string"},defaultValue:{func:!1,value:'""'}},{name:"error",description:"Текст ошибки",type:{name:"string"},defaultValue:{func:!1,value:'""'}},{name:"required",description:"Обязательное поле",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"disabled",description:"Отключенное состояние",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"size",description:"Размер: xs | sm | md | lg | xl",type:{name:"string"},defaultValue:{func:!1,value:'"md"'}},{name:"minTime",description:"Минимальное время (HH:mm или HH:mm:ss)",type:{name:"string"},defaultValue:{func:!1,value:"null"}},{name:"maxTime",description:"Максимальное время (HH:mm или HH:mm:ss)",type:{name:"string"},defaultValue:{func:!1,value:"null"}},{name:"showDropdown",description:"Показывать dropdown для выбора",type:{name:"boolean"},defaultValue:{func:!1,value:"true"}}],events:[{name:"update:modelValue"},{name:"change"},{name:"blur"},{name:"focus"}],sourceFiles:["/Users/lea_alex/Projects/1_DEVELOP/0_DESIGN_X_DEV/dxd-style-code/src/components/molecules/DXTimePicker/DXTimePicker.vue"]};export{de as _};
