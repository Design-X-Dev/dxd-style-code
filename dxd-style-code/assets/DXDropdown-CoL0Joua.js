import{r as c,c as i,s as B,d as K,a as y,b as T,f as L,m as b,e as z,k as x,l as f,C as O,y as s,z as d,g as A,T as F,o as m,q as P,L as $,G as q,M}from"./vue.esm-bundler-Nfu98kES.js";import{_ as U}from"./DXIcon-DQdlGsO1.js";import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as j}from"./ChevronDownIcon-DnL0EvPK.js";const H=["data-position","data-width","data-variant","data-disabled"],W=["disabled","onKeydown","aria-expanded"],J=["onKeydown"],D={__name:"DXDropdown",props:{position:{type:String,default:"right",validator:t=>["left","right","center"].includes(t)},width:{type:String,default:"md",validator:t=>["sm","md","lg","xl","auto"].includes(t)},variant:{type:String,default:"default",validator:t=>["default","minimal"].includes(t)},offset:{type:Number,default:8},disabled:{type:Boolean,default:!1},showChevron:{type:Boolean,default:!0}},setup(t){const n=t,a=c(!1),l=c(null),o=c(-1),p=()=>{n.disabled||(a.value=!a.value,a.value&&q(()=>{C()}))},r=()=>{a.value=!1,o.value=-1},v=e=>{l.value&&!l.value.contains(e.target)&&r()},S={close:r,isOpen:i(()=>a.value)};M("dropdown",S);const u=()=>{if(!l.value)return[];const e=l.value.querySelector('[data-component="DXDropdown"] > div:last-child');return e?Array.from(e.querySelectorAll('button[data-component="DXDropdownItem"]:not([disabled])')):[]},C=()=>{const e=u();e.length>0&&(e[0].focus(),o.value=0)},g=()=>{const e=u();e.length!==0&&(o.value=(o.value+1)%e.length,e[o.value].focus())},h=()=>{const e=u();e.length!==0&&(o.value=o.value<=0?e.length-1:o.value-1,e[o.value].focus())},_=()=>{a.value?g():p()},k=()=>{a.value&&h()},V=i(()=>["inline-flex items-center px-3 py-2 rounded-xl border border-slate-200 text-sm font-semibold text-slate-700 hover:border-slate-300 transition-colors focus:outline-none focus:ring-2 focus:ring-slate-900/10",n.showChevron&&"gap-2",n.disabled&&"opacity-60 cursor-not-allowed hover:border-slate-200"]),N={left:"left-0",right:"right-0",center:"left-1/2 -translate-x-1/2"},E={sm:"w-48",md:"w-56",lg:"w-72",xl:"w-96",auto:"w-auto min-w-[12rem]"},I=i(()=>["absolute z-20 bg-white border border-slate-200 rounded-2xl shadow-lg py-2",N[n.position],E[n.width],n.variant==="minimal"&&"shadow-md border-slate-100"]),X=i(()=>({marginTop:`${n.offset}px`}));return B(()=>{document.addEventListener("click",v)}),K(()=>{document.removeEventListener("click",v)}),(e,w)=>(m(),y("div",{class:"relative inline-block align-top",ref_key:"root",ref:l,"data-component":"DXDropdown","data-position":t.position,"data-width":t.width,"data-variant":t.variant,"data-disabled":t.disabled},[T("button",{type:"button",class:f(V.value),disabled:t.disabled,onClick:p,onKeydown:[s(d(_,["prevent"]),["down"]),s(d(k,["prevent"]),["up"]),s(r,["escape"])],"aria-haspopup":"true","aria-expanded":a.value},[b(e.$slots,"trigger",{},()=>[w[0]||(w[0]=P("Меню",-1))],!0),t.showChevron?(m(),z(U,{key:0,icon:O(j),size:"sm",animation:"none",class:f(["text-slate-400 transition-transform duration-200 flex-shrink-0",{"rotate-180":a.value}])},null,8,["icon","class"])):x("",!0)],42,W),L(F,{name:"dropdown-fade"},{default:A(()=>[a.value?(m(),y("div",{key:0,class:f(I.value),style:$(X.value),onKeydown:[s(d(g,["prevent"]),["down"]),s(d(h,["prevent"]),["up"]),s(r,["escape"])]},[b(e.$slots,"default",{},void 0,!0)],46,J)):x("",!0)]),_:3})],8,H))}},ee=G(D,[["__scopeId","data-v-9fb1752f"]]);D.__docgenInfo={exportName:"default",displayName:"DXDropdown",description:"",tags:{},props:[{name:"position",description:"Позиционирование: left | right | center",type:{name:"string"},defaultValue:{func:!1,value:"'right'"},values:["left","right","center"]},{name:"width",description:"Ширина меню: sm | md | lg | xl | auto",type:{name:"string"},defaultValue:{func:!1,value:"'md'"},values:["sm","md","lg","xl","auto"]},{name:"variant",description:"Вариант оформления: default | minimal",type:{name:"string"},defaultValue:{func:!1,value:"'default'"},values:["default","minimal"]},{name:"offset",description:"Отступ от trigger (px)",type:{name:"number"},defaultValue:{func:!1,value:"8"}},{name:"disabled",description:"Отключить dropdown",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"showChevron",description:"Показать стрелочку (chevron)",type:{name:"boolean"},defaultValue:{func:!1,value:"true"}}],slots:[{name:"trigger"},{name:"default"}],sourceFiles:["/Users/lea_alex/Projects/1_DEVELOP/0_DESIGN_X_DEV/dxd-style-code/src/components/organisms/DXDropdown/DXDropdown.vue"]};export{ee as D};
