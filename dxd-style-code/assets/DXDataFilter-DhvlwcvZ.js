import{r as $,c as s,w as F,a as o,o as t,p as y,b as k,q as u,g as C,F as U,G as x,d as h,e as m,y as v,z as D,j as r,x as M}from"./vue.esm-bundler-C1fUoNF-.js";import{u as d}from"./useClassComposition-Dym2pzZ_.js";import{u as w}from"./useSpacing-BOHUzi8w.js";import{_ as N}from"./DXInput-BG2R0LGs.js";import{_ as Q}from"./DXSelect-CgmhnMxb.js";import{_ as W}from"./DXDatePicker-BJkPB1Pe.js";import{_ as b}from"./DXButton-DzgLKRkE.js";import{_ as Y}from"./DXIcon-Bc0cQL8C.js";import{_ as Z}from"./DXHeading-S6mljWwV.js";import{_ as z}from"./DXText-Bu-Qlv6N.js";import{r as ee}from"./XMarkIcon-DTqRFgaM.js";const ae=["data-grouping"],te={class:"flex-1"},le={key:1,class:"flex gap-2"},ne={__name:"DXDataFilter",props:{filters:{type:Array,required:!0,default:()=>[]},filterDefinitions:{type:Array,default:()=>[]},grouping:{type:String,default:"AND",validator:a=>["AND","OR"].includes(a)},title:{type:String,default:""},removable:{type:Boolean,default:!0},showActions:{type:Boolean,default:!0}},emits:["update:filters","apply","reset","filter-change","grouping-change"],setup(a,{emit:B}){const V=a,c=B,i=$([...V.filters]),p=$(V.grouping),G=s(()=>[i.value]),S=s(()=>d("w-full")),X=s(()=>d("mb-4",w("md","padding"))),E=s(()=>d("space-y-4")),O=s(()=>d("space-y-2")),R=s(()=>d("flex items-center justify-center py-2")),j=s(()=>d("space-y-3")),q=s(()=>d("flex items-start gap-2")),I=s(()=>d("flex items-center justify-end gap-2 mt-4",w("md","padding")));function f(){c("update:filters",[...i.value]),c("filter-change",[...i.value])}function L(){p.value=p.value==="AND"?"OR":"AND",c("grouping-change",p.value)}function P(n){i.value=i.value.filter(g=>g.id!==n),f()}function T(){c("apply",{filters:[...i.value],grouping:p.value})}function H(){i.value=[],p.value="AND",c("reset"),c("update:filters",[])}return F(()=>V.filters,n=>{i.value=[...n]},{deep:!0}),F(()=>V.grouping,n=>{p.value=n}),(n,g)=>(t(),o("div",{class:u(S.value),"data-component":"DXDataFilter","data-grouping":a.grouping},[a.title||n.$slots.header?(t(),o("div",{key:0,class:u(X.value)},[C(n.$slots,"header",{},()=>[a.title?(t(),h(Z,{key:0,level:"3",size:"lg",weight:"semibold",color:"default"},{default:m(()=>[v(D(a.title),1)]),_:1})):y("",!0)])],2)):y("",!0),k("div",{class:u(E.value)},[(t(!0),o(U,null,x(G.value,(J,_)=>(t(),o("div",{key:_,class:u(O.value)},[_>0?(t(),o("div",{key:0,class:u(R.value)},[r(b,{variant:a.grouping==="AND"?"primary":"ghost",size:"sm",onClick:L},{default:m(()=>[v(D(a.grouping),1)]),_:1},8,["variant"])],2)):y("",!0),k("div",{class:u(j.value)},[(t(!0),o(U,null,x(J,(e,K)=>{var A;return t(),o("div",{key:e.id||K,class:u(q.value)},[a.removable?(t(),h(b,{key:0,variant:"ghost",size:"sm",onClick:l=>P(e.id)},{icon:m(()=>[r(Y,{icon:M(ee),size:"sm"},null,8,["icon"])]),_:1},8,["onClick"])):y("",!0),k("div",te,[r(z,{tag:"label",size:"sm",weight:"medium",color:"default",class:"block mb-1"},{default:m(()=>{var l;return[v(D(e.label||((l=a.filterDefinitions[e.id])==null?void 0:l.label)),1)]}),_:2},1024),e.type==="text"||!e.type?(t(),h(N,{key:0,modelValue:e.value,"onUpdate:modelValue":[l=>e.value=l,f],placeholder:e.placeholder||"Введите значение"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):e.type==="number"?(t(),o("div",le,[r(N,{modelValue:e.value.min,"onUpdate:modelValue":[l=>e.value.min=l,f],type:"number",placeholder:"От"},null,8,["modelValue","onUpdate:modelValue"]),r(N,{modelValue:e.value.max,"onUpdate:modelValue":[l=>e.value.max=l,f],type:"number",placeholder:"До"},null,8,["modelValue","onUpdate:modelValue"])])):e.type==="select"?(t(),h(Q,{key:2,modelValue:e.value,"onUpdate:modelValue":[l=>e.value=l,f],options:e.options||((A=a.filterDefinitions[e.id])==null?void 0:A.options),placeholder:e.placeholder||"Выберите значение"},null,8,["modelValue","onUpdate:modelValue","options","placeholder"])):e.type==="date"?(t(),h(W,{key:3,modelValue:e.value,"onUpdate:modelValue":[l=>e.value=l,f],range:e.range},null,8,["modelValue","onUpdate:modelValue","range"])):C(n.$slots,`filter-${e.type}`,{key:4,filter:e,filterDefinition:a.filterDefinitions[e.id]},()=>[r(z,{tag:"p",size:"sm",color:"muted"},{default:m(()=>[v(" Используйте slot filter-"+D(e.type)+" для кастомного фильтра ",1)]),_:2},1024)])])],2)}),128))],2)],2))),128))],2),n.$slots.actions||a.showActions?(t(),o("div",{key:1,class:u(I.value)},[C(n.$slots,"actions",{},()=>[r(b,{variant:"ghost",onClick:H},{default:m(()=>[...g[0]||(g[0]=[v("Сбросить",-1)])]),_:1}),r(b,{variant:"primary",onClick:T},{default:m(()=>[...g[1]||(g[1]=[v("Применить",-1)])]),_:1})])],2)):y("",!0)],10,ae))}};ne.__docgenInfo={exportName:"default",displayName:"DXDataFilter",description:"",tags:{},props:[{name:"filters",description:`Активные фильтры (v-model)
Формат: [{ id, type, value, label?, placeholder?, options?, range? }]`,type:{name:"array"},required:!0,defaultValue:{func:!1,value:"[]"}},{name:"filterDefinitions",description:`Определения фильтров
Формат: [{ id, label, type, options?, placeholder? }]`,type:{name:"array"},defaultValue:{func:!1,value:"[]"}},{name:"grouping",description:"Группировка условий: AND | OR",tags:{default:[{description:"'AND'",title:"default"}]},type:{name:"string"},defaultValue:{func:!1,value:'"AND"'},values:["AND","OR"]},{name:"title",description:"Заголовок фильтра",type:{name:"string"},defaultValue:{func:!1,value:'""'}},{name:"removable",description:"Можно ли удалять фильтры",tags:{default:[{description:"true",title:"default"}]},type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"showActions",description:"Показывать кнопки действий",tags:{default:[{description:"true",title:"default"}]},type:{name:"boolean"},defaultValue:{func:!1,value:"true"}}],events:[{name:"update:filters"},{name:"apply"},{name:"reset"},{name:"filter-change"},{name:"grouping-change"}],slots:[{name:"header"},{name:"`filter-${filter.type}`",scoped:!0,bindings:[{name:"name",title:"binding"},{name:"filter",title:"binding"},{name:"filter-definition",title:"binding"}]},{name:"actions"}],sourceFiles:["/Users/lea_alex/Projects/1_DEVELOP/0_DESIGN_X_DEV/dxd-style-code/src/components/molecules/DXDataFilter/DXDataFilter.vue"]};export{ne as _};
