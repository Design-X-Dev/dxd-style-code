import{r as v,c as y,w as X,s as z,d as I,a as n,k as i,b as s,t as m,F as D,B as _,e as g,q as h,p as w,l as V,D as $,E as F,z as A,y as T,o,G as U}from"./vue.esm-bundler-Nfu98kES.js";const G={key:0,class:"block text-sm text-slate-600 mb-1 font-medium"},K={key:1,class:"flex flex-wrap gap-2 mb-2"},q=["onClick"],H={class:"truncate flex items-center gap-2"},J={key:2,class:"absolute z-20 mt-2 w-full bg-white border border-slate-200 rounded-xl shadow-lg p-3 space-y-2"},Q={class:"relative"},R=["placeholder"],W={class:"max-h-48 overflow-y-auto space-y-1"},Y=["onClick"],Z={class:"flex items-center gap-2 flex-1 truncate"},ee={key:0,class:"w-4 h-4 text-slate-900 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},te={key:1,class:"text-xs text-slate-500 px-3 py-2"},le={__name:"DXSearchSelect",props:{modelValue:[String,Number,Array],options:{type:Array,default:()=>[]},label:{type:String,default:""},placeholder:{type:String,default:"Выбрать"},searchPlaceholder:{type:String,default:"Поиск..."},multiple:{type:Boolean,default:!1},creatable:{type:Boolean,default:!1}},emits:["update:modelValue","create"],setup(c,{emit:L}){const l=c,p=L,r=v(!1),u=v(""),x=v(null),S=v(null),f=y(()=>l.multiple?null:l.options.find(t=>String(t.value)===String(l.modelValue))),b=y(()=>{if(!l.multiple)return[];const t=Array.isArray(l.modelValue)?l.modelValue:[];return l.options.filter(e=>t.includes(e.value))}),M=y(()=>{if(l.multiple){const t=b.value.length;return t>0?`Выбрано: ${t}`:l.placeholder}return f.value?f.value.label:l.placeholder}),k=y(()=>{const t=u.value.toLowerCase().trim();return t?l.options.filter(e=>e.label.toLowerCase().includes(t)):l.options}),C=t=>l.multiple?(Array.isArray(l.modelValue)?l.modelValue:[]).includes(t):l.modelValue===t,j=()=>{r.value=!r.value,r.value&&U(()=>{var t;return(t=S.value)==null?void 0:t.focus()})},E=t=>{if(l.multiple){const e=Array.isArray(l.modelValue)?l.modelValue:[],d=e.indexOf(t);if(d>-1){const a=[...e];a.splice(d,1),p("update:modelValue",a)}else p("update:modelValue",[...e,t])}else p("update:modelValue",t),r.value=!1;u.value=""},N=t=>{if(l.multiple){const e=Array.isArray(l.modelValue)?l.modelValue:[];p("update:modelValue",e.filter(d=>d!==t))}},O=()=>{l.creatable&&u.value&&(p("create",u.value),u.value="")},B=t=>{x.value&&!x.value.contains(t.target)&&(r.value=!1,u.value="")};return X(r,t=>{t||(u.value="")}),z(()=>document.addEventListener("click",B)),I(()=>document.removeEventListener("click",B)),(t,e)=>{var d;return o(),n("div",{class:"relative",ref_key:"root",ref:x,"data-component":"DXSearchSelect"},[c.label?(o(),n("label",G,m(c.label),1)):i("",!0),c.multiple&&b.value.length>0?(o(),n("div",K,[(o(!0),n(D,null,_(b.value,a=>(o(),n("span",{key:a.value,class:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium bg-slate-100 text-slate-700 rounded-lg"},[a.icon?(o(),g(w(a.icon),{key:0,class:"w-3 h-3"})):i("",!0),h(" "+m(a.label)+" ",1),s("button",{type:"button",class:"hover:text-slate-900",onClick:A(P=>N(a.value),["stop"])},[...e[3]||(e[3]=[s("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,q)]))),128))])):i("",!0),s("button",{type:"button",class:V(["w-full flex items-center justify-between h-10 px-4 py-2.5 text-sm rounded-xl border border-slate-200 bg-white transition-colors",[!r.value&&"hover:border-slate-300",r.value&&"ring-2 ring-slate-900/10 border-slate-300"]]),onClick:j},[s("span",H,[!c.multiple&&((d=f.value)!=null&&d.icon)?(o(),g(w(f.value.icon),{key:0,class:"w-4 h-4 text-slate-500"})):i("",!0),h(" "+m(M.value),1)]),(o(),n("svg",{class:V(["w-4 h-4 text-slate-400 transition-transform",{"rotate-180":r.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...e[4]||(e[4]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2))],2),r.value?(o(),n("div",J,[s("div",Q,[$(s("input",{ref_key:"searchInput",ref:S,"onUpdate:modelValue":e[0]||(e[0]=a=>u.value=a),class:"w-full px-3 py-2 text-sm border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-slate-900/10",placeholder:c.searchPlaceholder,onKeydown:[e[1]||(e[1]=A(()=>{},["stop"])),e[2]||(e[2]=T(a=>r.value=!1,["escape"]))]},null,40,R),[[F,u.value]]),e[5]||(e[5]=s("svg",{class:"absolute right-3 top-2.5 w-4 h-4 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1))]),s("div",W,[(o(!0),n(D,null,_(k.value,a=>(o(),n("button",{key:a.value,type:"button",class:V(["w-full text-left px-3 py-2 rounded-lg hover:bg-slate-50 text-sm flex items-center justify-between gap-2",{"bg-slate-100":C(a.value)}]),onClick:P=>E(a.value)},[s("span",Z,[a.icon?(o(),g(w(a.icon),{key:0,class:"w-4 h-4 text-slate-500"})):i("",!0),h(" "+m(a.label),1)]),C(a.value)?(o(),n("svg",ee,[...e[6]||(e[6]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):i("",!0)],10,Y))),128)),c.creatable&&u.value&&!k.value.length?(o(),n("button",{key:0,type:"button",class:"w-full text-left px-3 py-2 rounded-lg hover:bg-slate-50 text-sm flex items-center gap-2 text-slate-600",onClick:O},[e[7]||(e[7]=s("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)),h(' Создать "'+m(u.value)+'" ',1)])):k.value.length?i("",!0):(o(),n("p",te,"Не найдено"))])])):i("",!0)],512)}}};le.__docgenInfo={exportName:"default",displayName:"DXSearchSelect",description:"",tags:{},props:[{name:"modelValue",description:"Значение (v-model) - строка или массив для multiple",type:{name:"string|number|array"}},{name:"options",description:"Опции: [{ value, label, icon? }]",type:{name:"array"},defaultValue:{func:!1,value:"[]"}},{name:"label",description:"Лейбл",type:{name:"string"},defaultValue:{func:!1,value:'""'}},{name:"placeholder",description:"Placeholder",type:{name:"string"},defaultValue:{func:!1,value:'"Выбрать"'}},{name:"searchPlaceholder",description:"Placeholder поиска",type:{name:"string"},defaultValue:{func:!1,value:'"Поиск..."'}},{name:"multiple",description:"Множественный выбор",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"creatable",description:"Возможность создавать новые опции",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}}],events:[{name:"update:modelValue"},{name:"create"}],sourceFiles:["/Users/lea_alex/Projects/1_DEVELOP/0_DESIGN_X_DEV/dxd-style-code/src/components/molecules/DXSearchSelect/DXSearchSelect.vue"]};export{le as _};
