import{a as i,o,b as r,r as c,w as M,p,z as d,j as g,x as f,y as D,F as C,G as $,B as v,q as j,d as N}from"./vue.esm-bundler-C1fUoNF-.js";import{_ as b}from"./DXIcon-Bc0cQL8C.js";import{r as E}from"./DocumentIcon-BNcD3fZD.js";import{r as X}from"./XMarkIcon-DTqRFgaM.js";import{r as A}from"./PlusIcon-Dnen0WQA.js";function I(a,y){return o(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 16.5V9.75m0 0 3 3m-3-3-3 3M6.75 19.5a4.5 4.5 0 0 1-1.41-8.775 5.25 5.25 0 0 1 10.233-2.33 3 3 0 0 1 3.758 3.848A3.752 3.752 0 0 1 18 19.5H6.75Z"})])}const O={class:"w-full","data-component":"DXFileUpload"},R={key:0,class:"block text-sm font-medium text-slate-700 mb-1"},G=["accept","multiple","disabled"],Z={key:0,class:"text-center"},P={class:"text-sm font-medium text-slate-700 mb-1"},T=["disabled"],W={class:"text-xs text-slate-500"},q={key:1,class:"space-y-2"},H={key:0,class:"w-12 h-12 flex-shrink-0 rounded overflow-hidden bg-slate-200"},K=["src","alt"],J={class:"flex-1 min-w-0"},Q={class:"text-sm font-medium text-slate-900 truncate"},Y={class:"text-xs text-slate-500"},ee=["onClick"],te=["disabled"],le={key:1,class:"mt-1 text-xs text-slate-500"},ae={key:2,class:"mt-1 text-xs text-rose-500"},se={__name:"DXFileUpload",props:{modelValue:[File,FileList,Array],label:{type:String,default:""},helper:{type:String,default:""},accept:{type:String,default:""},multiple:{type:Boolean,default:!1},maxSize:{type:String,default:""},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","upload"],setup(a,{emit:y}){const u=a,k=y,h=c(null),w=c(null),m=c(!1),n=c([]),x=c(""),_=t=>{const e=Array.from(t.target.files||[]);V(e)},z=t=>{var l;if(m.value=!1,u.disabled)return;const e=Array.from(((l=t.dataTransfer)==null?void 0:l.files)||[]);V(e)},B=()=>{u.disabled||(m.value=!0)},S=t=>{t.target===w.value&&(m.value=!1)},V=t=>{x.value="";const e=t.map(l=>{if(l.type.startsWith("image/")){const s=URL.createObjectURL(l);return Object.assign(l,{preview:s})}return l});u.multiple?n.value=[...n.value,...e]:n.value=e.slice(0,1),k("update:modelValue",u.multiple?n.value:n.value[0])},U=t=>{const e=n.value[t];e.preview&&URL.revokeObjectURL(e.preview),n.value.splice(t,1),k("update:modelValue",u.multiple?n.value:n.value[0]||null)},L=t=>{if(t===0)return"0 Bytes";const e=1024,l=["Bytes","KB","MB","GB"],s=Math.floor(Math.log(t)/Math.log(e));return Math.round(t/Math.pow(e,s)*100)/100+" "+l[s]};return M(()=>u.modelValue,t=>{t||(n.value=[])}),(t,e)=>(o(),i("div",O,[a.label?(o(),i("label",R,d(a.label),1)):p("",!0),r("div",{ref_key:"dropZone",ref:w,class:j(["relative border-2 border-dashed rounded-xl p-6 transition-all",[m.value?"border-slate-900 bg-slate-50 scale-105":"border-slate-300 bg-white hover:border-slate-400",a.disabled&&"opacity-60 cursor-not-allowed"]]),onDragenter:v(B,["prevent"]),onDragover:e[2]||(e[2]=v(()=>{},["prevent"])),onDragleave:v(S,["prevent"]),onDrop:v(z,["prevent"])},[r("input",{ref_key:"fileInput",ref:h,type:"file",accept:a.accept,multiple:a.multiple,disabled:a.disabled,class:"hidden",onChange:_},null,40,G),n.value.length?(o(),i("div",q,[(o(!0),i(C,null,$(n.value,(l,s)=>{var F;return o(),i("div",{key:s,class:"flex items-center gap-3 p-3 bg-slate-50 rounded-lg"},[(F=l.type)!=null&&F.startsWith("image/")?(o(),i("div",H,[r("img",{src:l.preview,alt:l.name,class:"w-full h-full object-cover"},null,8,K)])):(o(),N(b,{key:1,icon:f(E),size:"lg",animation:"none",class:"text-slate-400 flex-shrink-0"},null,8,["icon"])),r("div",J,[r("p",Q,d(l.name),1),r("p",Y,d(L(l.size)),1)]),r("button",{type:"button",class:"text-slate-400 hover:text-slate-600 transition-colors",onClick:ne=>U(s),"aria-label":"Удалить файл"},[g(b,{icon:f(X),size:"md",animation:"scale"},null,8,["icon"])],8,ee)])}),128)),a.multiple?(o(),i("button",{key:0,type:"button",class:"w-full py-2 text-sm text-slate-600 hover:text-slate-900 border border-slate-200 rounded-lg hover:bg-slate-50",disabled:a.disabled,onClick:e[1]||(e[1]=l=>{var s;return(s=h.value)==null?void 0:s.click()})},[g(b,{icon:f(A),size:"sm",animation:"none",class:"inline mr-1"},null,8,["icon"]),e[4]||(e[4]=D(" Добавить ещё ",-1))],8,te)):p("",!0)])):(o(),i("div",Z,[g(b,{icon:f(I),size:"xl",animation:"none",class:"mx-auto text-slate-400 mb-3 w-12 h-12"},null,8,["icon"]),r("p",P,[e[3]||(e[3]=D(" Перетащите файлы сюда или ",-1)),r("button",{type:"button",class:"text-slate-900 underline hover:no-underline",disabled:a.disabled,onClick:e[0]||(e[0]=l=>{var s;return(s=h.value)==null?void 0:s.click()})}," выберите ",8,T)]),r("p",W,d(a.accept||"Любые файлы")+" "+d(a.maxSize?`• Макс. ${a.maxSize}`:""),1)]))],34),a.helper?(o(),i("p",le,d(a.helper),1)):p("",!0),x.value?(o(),i("p",ae,d(x.value),1)):p("",!0)]))}};se.__docgenInfo={exportName:"default",displayName:"DXFileUpload",description:"",tags:{},props:[{name:"modelValue",type:{name:"File|FileList|array"}},{name:"label",type:{name:"string"},defaultValue:{func:!1,value:'""'}},{name:"helper",type:{name:"string"},defaultValue:{func:!1,value:'""'}},{name:"accept",type:{name:"string"},defaultValue:{func:!1,value:'""'}},{name:"multiple",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"maxSize",type:{name:"string"},defaultValue:{func:!1,value:'""'}},{name:"disabled",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}}],events:[{name:"update:modelValue"},{name:"upload"}],sourceFiles:["/Users/lea_alex/Projects/1_DEVELOP/0_DESIGN_X_DEV/dxd-style-code/src/components/molecules/DXFileUpload/DXFileUpload.vue"]};export{se as _};
