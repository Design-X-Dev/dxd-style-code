import{a as n,o as s,b as i,c as C,q as m,p as g,j as r,F as k,G as h,g as b,D as T,d as G,z as x,x as y,B,e as f,y as v}from"./vue.esm-bundler-C1fUoNF-.js";import{_ as z}from"./DXIcon-Bc0cQL8C.js";import{_ as S}from"./DXCheckbox-DQusejYU.js";import{D as F}from"./DXDropdown-DAfwPhYF.js";import{_ as V}from"./DXDropdownItem-sgbg46Q-.js";import{_ as O}from"./DXDropdownDivider-DVs74pqL.js";import{_ as M}from"./DXLoader-DAWlORDv.js";import{_ as J}from"./DXSearchSelect-Cl2oWNWm.js";import{_ as Q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as W}from"./ChevronDownIcon-DF-4rgxU.js";import{r as Y,a as E}from"./FunnelIcon-Ba3wLEuE.js";import{r as R}from"./PencilIcon-BVI5idyX.js";import{r as A}from"./TrashIcon-DHw2oPM1.js";function Z(e,X){return s(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"})])}const K={class:"min-w-full divide-y divide-slate-200"},_={key:0,class:"px-4 py-3 w-12"},ee=["onClick"],te={class:"flex items-center gap-2"},ae={class:"p-2 min-w-[200px]"},le={key:1,class:"px-4 py-3 w-20 text-right"},se={class:"divide-y divide-slate-200 bg-white"},ne={key:0},ie=["colspan"],oe={key:1},re=["colspan"],de={class:"bg-slate-100"},ue=["colspan"],ce=["onClick"],fe={key:0,class:"px-4 py-3"},me={key:1,class:"px-4 py-3 text-right"},ye={class:"flex justify-end"},ge=["onClick"],ke={key:0,class:"px-4 py-3"},pe={key:1,class:"px-4 py-3 text-right"},he={class:"flex justify-end"},H={__name:"DXBaseTable",props:{columns:{type:Array,required:!0},data:{type:Array,default:()=>[]},sortBy:{type:String,default:""},sortDirection:{type:String,default:"asc",validator:e=>["asc","desc"].includes(e)},selectable:{type:Boolean,default:!1},selectedRows:{type:Array,default:()=>[]},actions:{type:Boolean,default:!1},filterable:{type:Boolean,default:!1},filters:{type:Object,default:()=>({})},getFilterOptions:{type:Function,default:null},groupBy:{type:String},size:{type:String,default:"md",validator:e=>["sm","md","lg"].includes(e)},height:{type:String},stickyHeader:{type:Boolean,default:!0},striped:{type:Boolean,default:!1},bordered:{type:Boolean,default:!1},hoverable:{type:Boolean,default:!0},dense:{type:Boolean,default:!1},loading:{type:Boolean,default:!1}},emits:["row-click","row-select","select-all","sort","filter","edit","delete"],setup(e,{emit:X}){const d=e,$=X,w=C(()=>{let t=d.columns.length;return d.selectable&&t++,d.actions&&t++,t}),P=C(()=>d.groupBy?d.data.reduce((t,l)=>{const a=l[d.groupBy]||"Без группы";return t[a]||(t[a]=[]),t[a].push(l),t},{}):{}),p=t=>d.selectedRows.includes(t),D=C(()=>d.data.length>0&&d.data.every(t=>p(t.id))),q=C(()=>d.data.some(t=>p(t.id))&&!D.value),j=(t,l)=>t==null?"-":l.format&&typeof l.format=="function"?l.format(t):t,I=t=>{const l=d.sortBy===t&&d.sortDirection==="asc"?"desc":"asc";$("sort",{column:t,direction:l})},L=(t,l)=>{$("filter",{column:t,value:l})},N=t=>{$("row-select",{id:t,selected:!p(t)})},U=()=>{$("select-all",!D.value)};return(t,l)=>(s(),n("div",{style:T({maxHeight:e.height}),class:m(["border border-slate-200 rounded-2xl overflow-auto",e.height&&"relative"]),"data-component":"DXBaseTable"},[i("table",K,[i("thead",{class:m(["bg-slate-50",e.stickyHeader&&e.height&&"sticky top-0 z-10"])},[i("tr",null,[e.selectable?(s(),n("th",_,[r(S,{checked:D.value,indeterminate:q.value,onChange:U,size:e.size},null,8,["checked","indeterminate","size"])])):g("",!0),(s(!0),n(k,null,h(e.columns,a=>(s(),n("th",{key:a.key,style:T(a.width&&{width:a.width}),class:m(["px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wide",a.sortable!==!1&&"cursor-pointer hover:bg-slate-100"]),onClick:o=>a.sortable!==!1&&I(a.key)},[i("div",te,[i("span",null,x(a.label),1),e.sortBy===a.key?(s(),G(z,{key:0,icon:e.sortDirection==="asc"?y(Z):y(W),size:"xs",class:"text-slate-500"},null,8,["icon"])):g("",!0),e.filterable&&a.filterable!==!1?(s(),n("div",{key:1,class:"flex items-center",onClick:l[1]||(l[1]=B(()=>{},["stop"]))},[r(F,{position:"bottom",width:"auto",variant:"minimal",showChevron:!1},{trigger:f(()=>[i("button",{type:"button",class:m(["p-1 rounded hover:bg-slate-100 transition-colors",{"text-blue-600":e.filters[a.key],"text-slate-400":!e.filters[a.key]}]),onClick:l[0]||(l[0]=B(()=>{},["stop"]))},[r(z,{icon:y(Y),size:"xs",class:m(e.filters[a.key]?"text-blue-600":"text-slate-400")},null,8,["icon","class"])],2)]),default:f(()=>[i("div",ae,[r(J,{modelValue:e.filters[a.key]||"","onUpdate:modelValue":o=>L(a.key,o),options:d.getFilterOptions?d.getFilterOptions(a):[],size:e.size,placeholder:"Все",searchPlaceholder:`Поиск ${a.label.toLowerCase()}...`},null,8,["modelValue","onUpdate:modelValue","options","size","searchPlaceholder"])])]),_:2},1024)])):g("",!0)])],14,ee))),128)),e.actions?(s(),n("th",le,[...l[4]||(l[4]=[i("span",{class:"text-xs font-semibold text-slate-600 uppercase tracking-wide"}," Действия ",-1)])])):g("",!0)])],2),i("tbody",se,[e.loading?(s(),n("tr",ne,[i("td",{colspan:w.value,class:"text-center py-12"},[r(M,{size:"lg"}),l[5]||(l[5]=i("p",{class:"mt-2 text-sm text-slate-500"},"Загрузка данных...",-1))],8,ie)])):e.data.length===0?(s(),n("tr",oe,[i("td",{colspan:w.value,class:"text-center py-12"},[b(t.$slots,"empty",{},()=>[l[6]||(l[6]=i("div",{class:"text-slate-500"},[i("p",{class:"text-sm"},"Нет данных для отображения")],-1))],!0)],8,re)])):(s(),n(k,{key:2},[e.groupBy?(s(!0),n(k,{key:0},h(P.value,(a,o)=>(s(),n(k,{key:o},[i("tr",de,[i("td",{colspan:w.value,class:"px-4 py-2 font-semibold text-slate-700"},x(o)+" ("+x(a.length)+") ",9,ue)]),(s(!0),n(k,null,h(a,u=>(s(),n("tr",{key:u.id,class:m([e.hoverable&&"hover:bg-slate-50",e.striped&&"even:bg-slate-50",p(u.id)&&"bg-blue-50","transition-colors"]),onClick:c=>t.$emit("row-click",u)},[e.selectable?(s(),n("td",fe,[r(S,{checked:p(u.id),onChange:c=>N(u.id),size:e.size,onClick:l[2]||(l[2]=B(()=>{},["stop"]))},null,8,["checked","onChange","size"])])):g("",!0),(s(!0),n(k,null,h(e.columns,c=>(s(),n("td",{key:`${u.id}-${c.key}`,class:m(["px-4 py-3 text-sm text-slate-700",c.align==="center"&&"text-center",c.align==="right"&&"text-right",e.dense&&"py-2"])},[b(t.$slots,`cell-${c.key}`,{row:u,value:u[c.key],column:c},()=>[v(x(j(u[c.key],c)),1)],!0)],2))),128)),e.actions?(s(),n("td",me,[i("div",ye,[b(t.$slots,"actions",{row:u},()=>[r(F,{position:"right",width:"auto"},{trigger:f(()=>[r(z,{icon:y(E),size:e.size,class:"cursor-pointer"},null,8,["icon","size"])]),default:f(()=>[r(V,{icon:y(R),onClick:c=>t.$emit("edit",u)},{default:f(()=>[...l[7]||(l[7]=[v(" Редактировать ",-1)])]),_:1},8,["icon","onClick"]),r(O),r(V,{icon:y(A),variant:"danger",onClick:c=>t.$emit("delete",u)},{default:f(()=>[...l[8]||(l[8]=[v(" Удалить ",-1)])]),_:1},8,["icon","onClick"])]),_:2},1024)],!0)])])):g("",!0)],10,ce))),128))],64))),128)):(s(!0),n(k,{key:1},h(e.data,a=>(s(),n("tr",{key:a.id,class:m([e.hoverable&&"hover:bg-slate-50 cursor-pointer",e.striped&&"even:bg-slate-50",p(a.id)&&"bg-blue-50","transition-colors"]),onClick:o=>t.$emit("row-click",a)},[e.selectable?(s(),n("td",ke,[r(S,{checked:p(a.id),onChange:o=>N(a.id),size:e.size,onClick:l[3]||(l[3]=B(()=>{},["stop"]))},null,8,["checked","onChange","size"])])):g("",!0),(s(!0),n(k,null,h(e.columns,o=>(s(),n("td",{key:`${a.id}-${o.key}`,class:m(["px-4 py-3 text-sm text-slate-700",o.align==="center"&&"text-center",o.align==="right"&&"text-right",e.dense&&"py-2"])},[b(t.$slots,`cell-${o.key}`,{row:a,value:a[o.key],column:o},()=>[v(x(j(a[o.key],o)),1)],!0)],2))),128)),e.actions?(s(),n("td",pe,[i("div",he,[b(t.$slots,"actions",{row:a},()=>[r(F,{position:"right",width:"auto"},{trigger:f(()=>[r(z,{icon:y(E),size:e.size,class:"cursor-pointer"},null,8,["icon","size"])]),default:f(()=>[r(V,{icon:y(R),onClick:o=>t.$emit("edit",a)},{default:f(()=>[...l[9]||(l[9]=[v(" Редактировать ",-1)])]),_:1},8,["icon","onClick"]),r(O),r(V,{icon:y(A),variant:"danger",onClick:o=>t.$emit("delete",a)},{default:f(()=>[...l[10]||(l[10]=[v(" Удалить ",-1)])]),_:1},8,["icon","onClick"])]),_:2},1024)],!0)])])):g("",!0)],10,ge))),128))],64))])])],6))}},je=Q(H,[["__scopeId","data-v-7813991b"]]);H.__docgenInfo={exportName:"default",displayName:"DXBaseTable",description:"",tags:{},props:[{name:"columns",type:{name:"array"},required:!0},{name:"data",type:{name:"array"},defaultValue:{func:!1,value:"[]"}},{name:"sortBy",type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"sortDirection",type:{name:"string"},defaultValue:{func:!1,value:"'asc'"},values:["asc","desc"]},{name:"selectable",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"selectedRows",type:{name:"array"},defaultValue:{func:!1,value:"[]"}},{name:"actions",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"filterable",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"filters",type:{name:"object"},defaultValue:{func:!1,value:"{}"}},{name:"getFilterOptions",type:{name:"func"},defaultValue:{func:!1,value:"null"}},{name:"groupBy",type:{name:"string"}},{name:"size",type:{name:"string"},defaultValue:{func:!1,value:"'md'"},values:["sm","md","lg"]},{name:"height",type:{name:"string"}},{name:"stickyHeader",type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"striped",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"bordered",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"hoverable",type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"dense",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"loading",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}}],events:[{name:"row-click"},{name:"edit"},{name:"delete"},{name:"row-select"},{name:"select-all"},{name:"sort"},{name:"filter"}],slots:[{name:"empty"},{name:"`cell-${col.key}`",scoped:!0,bindings:[{name:"name",title:"binding"},{name:"row",title:"binding"},{name:"value",title:"binding"},{name:"column",title:"binding"}]},{name:"actions",scoped:!0,bindings:[{name:"row",title:"binding"}]}],sourceFiles:["/Users/lea_alex/Projects/1_DEVELOP/0_DESIGN_X_DEV/dxd-style-code/src/components/organisms/DXBaseTable/DXBaseTable.vue"]};export{je as D};
